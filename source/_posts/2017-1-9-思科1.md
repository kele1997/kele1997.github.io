---
layout: post
title: "思科学习（1）"
date: 2017-1-9 13:07:37
author: "可乐"
catalog:
tags:
  -  学习使我快乐
  -  思科

---
>路由器 TPlink 思科 

# ARP协议
ip地址 网络层  数据帧必须包含目的的mac地址 
   

>arp的工作原理   
>理解ARP的缓存标的作用
sw >arp >mac

src 源  rcv接受 mac 媒体介质访问  route map 路由映射表  
## apr数据包格式 
ethernet-II（以太网二帧） arp  fcs

**apr报文不能穿越路由器，不能被转发到其他广播域中，也就是不能穿过广播域**

## apr缓存
apr -a  两个主机通信需要有彼此的缓存表，否则需要apr解析
## apr代理
**位于不同网络的网络设备在不配置网关的情况下，用arp代理实现通信**
## 免费apr
>ip获取的两种方式，手动，DHCP自动获取  
**免费arp可以用来探测ip地址是否冲突**
**两种ip获取一样，谁先开机，谁能上网，先开机的设备发送报文，arp缓存表，其余的设备无法上网**

## 总结
什么时候产生arp request

----------
优雅的分割线

# 传输层协议
>主机端到端连通性，最常见的两个协议是tcp udp

## tcp
* port（端口号）qq 迅雷自动的动态的端口号
* 传输层主要体现端口号
* 协议   端口
* ftp    21 20
* http   80
* telnet 23
* smtp  25
**端口号用来区分不同网络**
## tcp头部 
>上面是默认的端口号，但是可以更改
* ip header           tcp header          data
* 缓存用来调整出口和入口大小的不平衡

## tcp建立连接的过程
* 三次握手建立可靠连接  
* **建立连接 之前什么也干不了**
* syn建立连接
## tcp流量控制
## tcp关闭连接
* fin关闭连接
## udp
* 面向无连接的传输层协议，传输可靠性差
* 允许丢包，无确认机制
## udp头部结构
## udp传输过程
* **主要用来传输语音流和视频流  在线方式的 live 实时的居多**   如果使用tcp会卡到飞起
* udp不提供重传机制，占用资源小，处理效率高
* 一些时效敏感的用udp 延迟是可以接受的  tcp延迟太高
## 总结
* **tcp的确认标识位用来检测完整性**
* 那些标识位参与了三次握手？
* 语音有确认机制，虽然质量不好，但是完整

# 数据转发过程
## 数据转发过程概念
* 主机 arp    rta（路由）   检测路由表（那条线路最好）   另一台路由   （与另一边相同）
## ip封装
## 查找路由
* pc也有路由表  cmd   route print
* 子网掩码 network mask
## 以太网的封装
* type   >>>>>用来说明是arp 还是ip
## 数据帧的转发过程，数据包的封装，解封装
-------------


# 子网掩码的划分
>ip协议的工作机制
>ip报文结构
公有私有结构

## ip报文头部
* 分片之后还会组装，会降低传输效率，所以尽可能的避免分片
* cos值表示等级0-7（等级标记一个字节）网络高的流量等级高 QoS
* 迅雷等软件可以动态调整cos值，抢带宽，提高等级
## ip编址
*  网络地址的组成 网络位   主机位（。0）      iPv4 2^32  ipv6 2^128地址范围
* 广播地址的组成  网络位  主机位 （。255）
## 二进制，十进制 十六进制....................
200-128-64 -8?    11001000
## ip地址的分类
ABCDE类  ABC主要是单播地址  D类主要是用来组播  E类主要是保留，军队或者组织使用  
各种网络的范围  1+1 2+2等等
## ip地址的类型
* 私有地址的类型
> 私有地址的范围，私有地址只出现在内网，不会出现在公网
* 特殊地址   
>主要是用来检测TCP协议   ping 127.0.0.1   127.0.0.1 -127.255.255.255
>0.0.0.0  any
>255.255.255.255 广播
## 网络通信
不同子网>>  不同广播域 >> 不能通信>>需要路由器
## 默认子网掩码（区分网络大小）需要用连续的1和0组成
	A类：255  0 0 0    18 
	B类：255 255 0 0    116
	C类：255 255 255 0   124
## 地址规划
* 网络位不能改变
* ip地址 子网掩码 网络地址 主机数 可用主机数
* 路由条目？  全0子网  全1广播
## 变长子网掩码（为了节约地址）
* 子网掩码第四个8位的1决定了ip地址的第四个八位是否能变动
## 变长子网掩码举例
* 子网数目2^n n指1个个数
* 有效主机数的计算
* 子网号?
* 广播号?

例题   172.16.100.100/19(掩码位)255.255.224.0  

1. 2^19-16     96.0-127.255
2. 2^（32-19）-2
3. 

## 无类域间路由
* 汇总路由 
* 路由器的内存512M 1G 50% 70%崩溃
* 简化路由表
* 最长匹配原则（掩码最长）掩码越长，越精确（第一原则）
## 网关
* 可以有多个网关
## 生存实际 TTL 
中国访问美国的网址，隐藏运营商，直接跳过，30跳内到达
## 协议号
* 子网掩码的作用
* ip报ttl字段作用  查看跳数  ，还可以防环  

停电事故哈哈哈哈哈哈哈哈哈啊哈哈哈哈哈哈哈
---------------------------
优雅的分割线2   

associate professional experter
## 常用图例
## 思科设备的简单启动过
* 硬件自检
* 定位并加载思科ios系统文件
* 定位并运行配置文件 config.text配置文件
* 软件console 
* 软件Telnet /ssh v1 v2
* aux    电话线>>>modem >>aux口    古老的方式
* 网管软件  sdm asdm 登录路由器
* E代表以太口 F指快速以太口   W指的是空槽
# 常用命令
>enable   
>dialog  选择no  
>\#模式用来查看
>no ip duoman

CCNA命令集   

	hostname 改名  （config#）  
	show version  显示版本啥的状态哈的   
	show history 查看历史     
	config 命令     
	ctrl+ shift +6  卡死的时候  
	shou terminal  
	terminal history size 10    10条  
	show history size  显示histor条数   
	show  terminal   
	banner  motd # 
	写正文
	\#
	用来写注意问题   
	sh ip int br   显示端口信息   
	int fa0/0   
	ip add   
	ip address 10.1.1.1.255.255.255.0   
	no shutdown   
	copy running-config start-config     
	show  run   
	show  start  
	不要轻易保存
	show clock 
	clock set ?  调整时间
	clock set 16:41:00 9 jan ?
	clock time zone gtm ?
	clock time zone gtm 8  调整时区
	先调整时区，然后在调整时间
	show flash   
	show ?
	.bin是ios文件，系统
	进入端口后，description  lan=to-r1-fa0/1   只是加了个描述
	
	    